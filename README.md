# èŠ±å‰å¸‚åœºé¡¹ç›®

> ğŸ¯ **å…¨æ–°ç»Ÿä¸€æ¶æ„**ï¼šå¼€å‘å’Œç”Ÿäº§ç¯å¢ƒç°åœ¨ä½¿ç”¨å®Œå…¨ç›¸åŒçš„åç«¯ä»£ç ï¼
> 
> ğŸ“– **è¯¦ç»†æ–‡æ¡£**ï¼šæŸ¥çœ‹ [docs/unified-api.md](docs/unified-api.md) äº†è§£æ–°æ¶æ„ä½¿ç”¨æ–¹æ³•

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–
```bash
npm install
```

### 2. ç¯å¢ƒå˜é‡é…ç½®
åˆ›å»º `.env.local` æ–‡ä»¶ï¼ˆå¼€å‘ç¯å¢ƒï¼‰æˆ–åœ¨Vercelä¸­é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```bash
# é˜¿é‡Œäº‘OSSé…ç½®
OSS_REGION=oss-cn-beijing
OSS_BUCKET=your-bucket-name
ALIBABA_CLOUD_ACCESS_KEY_ID=your-access-key-id
ALIBABA_CLOUD_ACCESS_KEY_SECRET=your-access-key-secret
```

### 3. å¼€å‘ç¯å¢ƒè¿è¡Œ

#### ğŸ¯ æ¨èï¼šç»Ÿä¸€å¼€å‘ç¯å¢ƒï¼ˆä½¿ç”¨Vercel Devï¼‰
```bash
npm run dev
```
è¿™ä¼šåŒæ—¶å¯åŠ¨å‰ç«¯å’Œåç«¯APIï¼Œä¸ç”Ÿäº§ç¯å¢ƒå®Œå…¨ä¸€è‡´ï¼

#### ğŸ“± ä»…å‰ç«¯å¼€å‘
```bash
npm run dev:frontend
```

#### ğŸ–¥ï¸ ä»…ExpressæœåŠ¡å™¨å¼€å‘
```bash
npm run dev:express
```

### 4. æ„å»ºå’Œéƒ¨ç½²
```bash
npm run build
```

## ğŸ“‹ é¡¹ç›®ç»“æ„

```
flower-market/
â”œâ”€â”€ lib/                        # ğŸ”¥ å…±äº«ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ handlers.js              # æ‰€æœ‰APIçš„ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ vercel-adapter.js        # Vercel Functionsé€‚é…å™¨
â”‚   â””â”€â”€ express-adapter.js       # Expressé€‚é…å™¨
â”œâ”€â”€ api/                         # Vercel Functions (å¼€å‘&ç”Ÿäº§ç»Ÿä¸€)
â”‚   â”œâ”€â”€ hymnData/
â”‚   â”‚   â””â”€â”€ hymnList.json        # æ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ images.js               # è·å–å›¾ç‰‡åˆ—è¡¨
â”‚   â”œâ”€â”€ search.js               # æœç´¢åŠŸèƒ½
â”‚   â”œâ”€â”€ getContent.js           # è·å–ç›®å½•
â”‚   â””â”€â”€ hymn/detail/[id].js     # è¯¦æƒ…é¡µAPI
â”œâ”€â”€ src/                        # Vueå‰ç«¯ä»£ç 
â”œâ”€â”€ server/                     # ExpressæœåŠ¡å™¨ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ public/                     # é™æ€èµ„æº
â””â”€â”€ vercel.json                 # Vercelé…ç½®
```

## âœ¨ ç»Ÿä¸€å¼€å‘ç¯å¢ƒä¼˜åŠ¿

- âœ… **å¼€å‘å’Œç”Ÿäº§å®Œå…¨ä¸€è‡´**ï¼šä½¿ç”¨ç›¸åŒçš„APIä»£ç 
- âœ… **å•ä¸€æ•°æ®æº**ï¼šåªéœ€ç»´æŠ¤ `api/hymnData/hymnList.json`
- âœ… **ç®€åŒ–éƒ¨ç½²**ï¼šæ— éœ€é¢å¤–é…ç½®
- âœ… **é”™è¯¯æ’æŸ¥ç®€å•**ï¼šå¼€å‘ç¯å¢ƒé—®é¢˜=ç”Ÿäº§ç¯å¢ƒé—®é¢˜
- âœ… **æ–°å¢æ¥å£ç®€å•**ï¼šä¸€æ¬¡ç¼–å†™ï¼Œä¸¤ç¯å¢ƒé€šç”¨

## ğŸ”§ å¼€å‘è¯´æ˜

### ä¿®æ”¹æ•°æ®
ç›´æ¥ç¼–è¾‘ `api/hymnData/hymnList.json` æ–‡ä»¶ï¼Œå¼€å‘å’Œç”Ÿäº§ç¯å¢ƒä¼šè‡ªåŠ¨åŒæ­¥ã€‚

### æ·»åŠ æ–°API
1. åœ¨ `lib/handlers.js` ä¸­ç¼–å†™ä¸šåŠ¡é€»è¾‘
2. åœ¨ `api/` ä¸‹åˆ›å»ºå¯¹åº”çš„Vercel Functionæ–‡ä»¶
3. å¯é€‰ï¼šåœ¨ExpressæœåŠ¡å™¨ä¸­æ·»åŠ è·¯ç”±

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ [docs/unified-api.md](docs/unified-api.md)

### æœ¬åœ°è°ƒè¯•
ä½¿ç”¨ `npm run dev` åï¼š
- å‰ç«¯ï¼šhttp://localhost:3000
- APIï¼šhttp://localhost:3000/api/*

### APIå¥åº·æ£€æŸ¥
```bash
npm run test:api
# æˆ–è®¿é—® http://localhost:3000/api/health
```

## ğŸš€ éƒ¨ç½²

æ¨é€åˆ°GitHubåï¼ŒVercelä¼šè‡ªåŠ¨éƒ¨ç½²ã€‚

## åŠŸèƒ½ç‰¹æ€§

- å“åº”å¼ç€‘å¸ƒæµå¸ƒå±€
- å›¾ç‰‡æœç´¢åŠŸèƒ½
- å›¾ç‰‡é¢„è§ˆ
- æŠ½å±‰å¼ç›®å½•
- ç§»åŠ¨ç«¯é€‚é…

## API æ¥å£

### è·å–æ‰€æœ‰å›¾ç‰‡
```
GET /api/images
```

### æœç´¢å›¾ç‰‡
```
GET /api/images/search?query=å…³é”®è¯
```

## æ³¨æ„äº‹é¡¹

1. ç¡®ä¿åç«¯æœåŠ¡å™¨åœ¨ `http://localhost:3000` è¿è¡Œ
2. å›¾ç‰‡æ–‡ä»¶éœ€è¦æ”¾åœ¨ `server/public/images` ç›®å½•ä¸‹
3. æ”¯æŒçš„å›¾ç‰‡æ ¼å¼ï¼šjpgã€jpegã€pngã€gif 